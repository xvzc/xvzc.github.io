<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Spring Boot 가이드: Mockito 기반의 테스트 코드 - xvzc.dev</title><meta name=Description content><meta property="og:title" content="Spring Boot 가이드: Mockito 기반의 테스트 코드"><meta property="og:description" content="이번 포스트에서는 Java, Spring Boot 환경에서 Mockito 기반의 테스트 코드를 작성하는 방법에 대해서 알아보겠습니다."><meta property="og:type" content="article"><meta property="og:url" content="https://xvzc.dev/spring-boot-mockito/"><meta property="og:image" content="https://xvzc.dev/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-10-08T21:31:41+09:00"><meta property="article:modified_time" content="2021-10-08T21:31:41+09:00"><meta property="og:site_name" content="xvzc.dev"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://xvzc.dev/logo.png"><meta name=twitter:title content="Spring Boot 가이드: Mockito 기반의 테스트 코드"><meta name=twitter:description content="이번 포스트에서는 Java, Spring Boot 환경에서 Mockito 기반의 테스트 코드를 작성하는 방법에 대해서 알아보겠습니다."><meta name=application-name content="My cool site"><meta name=apple-mobile-web-app-title content="My cool site"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://xvzc.dev/spring-boot-mockito/><link rel=prev href=https://xvzc.dev/spring-boot-exception/><link rel=next href=https://xvzc.dev/run-spring-boot/><link rel=stylesheet href=/css/style.min.css><link rel=preload href=/lib/fontawesome-free/all.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/fontawesome-free/all.min.css></noscript><link rel=preload href=/lib/animate/animate.min.css as=style onload='this.onload=null,this.rel="stylesheet"'><noscript><link rel=stylesheet href=/lib/animate/animate.min.css></noscript><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Spring Boot 가이드: Mockito 기반의 테스트 코드","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/xvzc.dev\/spring-boot-mockito\/"},"genre":"posts","keywords":"spring-boot, java","wordcount":227,"url":"https:\/\/xvzc.dev\/spring-boot-mockito\/","datePublished":"2021-10-08T21:31:41+09:00","dateModified":"2021-10-08T21:31:41+09:00","publisher":{"@type":"Organization","name":""},"author":{"@type":"Person","name":"xvzc"},"description":""}</script></head><body data-header-desktop=fixed data-header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem("theme")?localStorage.getItem("theme")==="dark":"auto"==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches:"auto"==="dark")&&document.body.setAttribute("theme","dark")</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title=xvzc.dev><span class=header-title-pre><i class="fa fa-home" aria-hidden=true></i></span></a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop>
<input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span>
</span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title=xvzc.dev><span class=header-title-pre><i class="fa fa-home" aria-hidden=true></i></span></a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw" aria-hidden=true></i></a>
<a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw" aria-hidden=true></i></a>
<span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin" aria-hidden=true></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw" aria-hidden=true></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Table of Contents</h2><div class="toc-content always-active" id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Spring Boot 가이드: Mockito 기반의 테스트 코드</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=https://github.com/xvzc title=Author target=_blank rel="noopener noreffer author" class=author><i class="fas fa-user-circle fa-fw" aria-hidden=true></i>xvzc</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw" aria-hidden=true></i>&nbsp;<time datetime=2021-10-08>2021-10-08</time>&nbsp;<i class="fas fa-pencil-alt fa-fw" aria-hidden=true></i>&nbsp;227 words&nbsp;
<i class="far fa-clock fa-fw" aria-hidden=true></i>&nbsp;2 minutes&nbsp;</div></div><div class="details toc" id=toc-static data-kept><div class="details-summary toc-title"><span>Table of Contents</span>
<span><i class="details-icon fas fa-angle-right" aria-hidden=true></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#mockito-기반의-단위-테스트>Mockito 기반의 단위 테스트</a></li><li><a href=#패키지-목록>패키지 목록</a></li></ul></li></ul></nav></div></div><div class=content id=content><p>이번 포스트에서는 Java, Spring Boot 환경에서 Mockito 기반의 테스트 코드를 작성하는 방법에 대해서 알아보겠습니다.</p><p>Github에서 샘플 프로젝트의 전체 코드를 확인할 수 있습니다.</p><p><a href=https://github.com/xvzc/spring-test target=_blank rel="noopener noreffer">GitHub - xvzc/spring-test: spring test repo</a></p><hr><h2 id=mockito-기반의-단위-테스트>Mockito 기반의 단위 테스트</h2><p>견고한 코딩을 하기위해서 테스트 코드 작성은 필수입니다. 아래는 Mockito 기반의 테스트 코드입니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=nd>@ExtendWith</span><span class=o>(</span><span class=n>MockitoExtension</span><span class=o>.</span><span class=na>class</span><span class=o>)</span>
</span></span><span class=line><span class=cl><span class=kd>public</span> <span class=kd>class</span> <span class=nc>UserServiceTest</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>    <span class=nd>@InjectMocks</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>UserService</span> <span class=n>userService</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@Mock</span>
</span></span><span class=line><span class=cl>    <span class=kd>private</span> <span class=n>UserRepository</span> <span class=n>userRepository</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>    <span class=nd>@DisplayName</span><span class=o>(</span><span class=s>&#34;유저 생성&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>    <span class=nd>@Test</span>
</span></span><span class=line><span class=cl>    <span class=kt>void</span> <span class=nf>addUser</span><span class=o>()</span> <span class=o>{</span>
</span></span><span class=line><span class=cl>        <span class=kd>final</span> <span class=n>UserDto</span><span class=o>.</span><span class=na>AddRequest</span> <span class=n>dto</span> <span class=o>=</span> <span class=n>UserDto</span><span class=o>.</span><span class=na>AddRequest</span><span class=o>.</span><span class=na>builder</span><span class=o>()</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>username</span><span class=o>(</span><span class=s>&#34;username&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>password</span><span class=o>(</span><span class=s>&#34;PaSsWoRd!2!#&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>nickname</span><span class=o>(</span><span class=s>&#34;usernick&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>bio</span><span class=o>(</span><span class=s>&#34;hello world&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>email</span><span class=o>(</span><span class=s>&#34;user@email.com&#34;</span><span class=o>)</span>
</span></span><span class=line><span class=cl>                <span class=o>.</span><span class=na>build</span><span class=o>();</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>User</span> <span class=n>user</span><span class=o>=</span> <span class=n>dto</span><span class=o>.</span><span class=na>toEntity</span><span class=o>();</span>
</span></span><span class=line><span class=cl>        <span class=n>doReturn</span><span class=o>(</span><span class=n>user</span><span class=o>).</span><span class=na>when</span><span class=o>(</span><span class=n>userRepository</span><span class=o>).</span><span class=na>save</span><span class=o>(</span><span class=n>any</span><span class=o>(</span><span class=n>User</span><span class=o>.</span><span class=na>class</span><span class=o>));</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl>        <span class=n>assertThat</span><span class=o>(</span><span class=n>userService</span><span class=o>.</span><span class=na>addUser</span><span class=o>(</span><span class=n>dto</span><span class=o>),</span> <span class=n>is</span><span class=o>(</span><span class=n>UserDto</span><span class=o>.</span><span class=na>Response</span><span class=o>.</span><span class=na>of</span><span class=o>(</span><span class=n>user</span><span class=o>)));</span>
</span></span><span class=line><span class=cl>    <span class=o>}</span>
</span></span><span class=line><span class=cl><span class=o>}</span>
</span></span></code></pre></td></tr></table></div></div><p>Mocking이란 가상의 객체를 생성해 스프링 컨텍스트를 실행하지 않고 테스트하는 환경을 의미합니다. 위 코드에서<code>doReturn(user).when(userRepository).save(any(User.class));</code>은 <code>userRepository</code>의 구현체를 사용하지 않고 <code>save()</code> 메서드의 리턴 값을 가정한다는 의미입니다.</p><blockquote><p>이러한 방식을 사용하는 이유는 Service 로직을 테스트 하는 경우에 userRepository의 정상 동작 여부는 상관이 없기 때문입니다. 데이터베이스 연결을 맺지 않고 userRepository가 정상적으로 동작한다는 가정하에 진행한다면 테스트 과정이 경량화 된다는 장점이 있습니다.</p></blockquote><h2 id=패키지-목록>패키지 목록</h2><p>아래는 위와 같은 테스트 코드 작성을 위한 패키지 import 목록입니다.</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span></code></pre></td><td class=lntd><pre tabindex=0 class=chroma><code class=language-java data-lang=java><span class=line><span class=cl><span class=cm>/** Essential imports for Unit tests Start */</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.junit.jupiter.api.DisplayName</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.junit.jupiter.api.Test</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.junit.jupiter.api.extension.ExtendWith</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.mockito.InjectMocks</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.mockito.Mock</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import</span> <span class=nn>org.mockito.junit.jupiter.MockitoExtension</span><span class=o>;</span>
</span></span><span class=line><span class=cl>
</span></span><span class=line><span class=cl><span class=kn>import static</span> <span class=nn>org.junit.Assert.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import static</span> <span class=nn>org.mockito.ArgumentMatchers.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import static</span> <span class=nn>org.mockito.Mockito.*</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=kn>import static</span> <span class=nn>org.hamcrest.CoreMatchers.is</span><span class=o>;</span>
</span></span><span class=line><span class=cl><span class=cm>/** Essential imports for Unit tests End */</span>
</span></span></code></pre></td></tr></table></div></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-10-08</span></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/spring-boot-mockito/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw" aria-hidden=true></i>&nbsp;<a href=/tags/spring-boot/>spring-boot</a>,&nbsp;<a href=/tags/java/>java</a></section><section><span><a href=javascript:void(0); onclick=window.history.back()>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/spring-boot-exception/ class=prev rel=prev title="Spring Boot 가이드: 예외 처리"><i class="fas fa-angle-left fa-fw" aria-hidden=true></i>Spring Boot 가이드: 예외 처리</a>
<a href=/run-spring-boot/ class=next rel=next title="Spring boot App을 실행하는 방법들">Spring boot App을 실행하는 방법들<i class="fas fa-angle-right fa-fw" aria-hidden=true></i></a></div></div><div id=comments><div id=giscus class=comment></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://giscus.app>Giscus</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw" aria-hidden=true></i><span itemprop=copyrightYear>2023 - 2024</span>&nbsp;|&nbsp;<span class=license>MIT License</span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw" aria-hidden=true></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw" aria-hidden=true></i></a></div><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/cookieconsent/cookieconsent.min.css><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/lunr/lunr.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/katex/katex.min.js></script><script type=text/javascript src=/lib/katex/contrib/auto-render.min.js></script><script type=text/javascript src=/lib/katex/contrib/copy-tex.min.js></script><script type=text/javascript src=/lib/katex/contrib/mhchem.min.js></script><script type=text/javascript src=/lib/cookieconsent/cookieconsent.min.js></script><script type=text/javascript>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:200},comment:{giscus:{category:"Comments",categoryId:"DIC_kwDOKk2RhM4Cadt7",darkTheme:"dark_dimmed",emitMetadata:"0",inputPosition:"bottom",lang:"en",lazyLoading:!1,lightTheme:"light",mapping:"pathname",reactionsEnabled:"1",repo:"xvzc/xvzc.github.io",repoId:"R_kgDOKk2RhA"}},cookieconsent:{content:{dismiss:"Got it!",link:"Learn more",message:"This website uses Cookies to improve your experience."},enable:!0,palette:{button:{background:"#f0f0f0"},popup:{background:"#1aa3ff"}},theme:"edgeless"},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!0,left:"\\begin{equation}",right:"\\end{equation}"},{display:!0,left:"\\begin{equation*}",right:"\\end{equation*}"},{display:!0,left:"\\begin{align}",right:"\\end{align}"},{display:!0,left:"\\begin{align*}",right:"\\end{align*}"},{display:!0,left:"\\begin{alignat}",right:"\\end{alignat}"},{display:!0,left:"\\begin{alignat*}",right:"\\end{alignat*}"},{display:!0,left:"\\begin{gather}",right:"\\end{gather}"},{display:!0,left:"\\begin{CD}",right:"\\end{CD}"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1},search:{highlightTag:"em",lunrIndexURL:"/index.json",maxResultLength:10,noResultsFound:"No results found",snippetLength:30,type:"lunr"}}</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-GGFZWMY8WD",{anonymize_ip:!0})</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-GGFZWMY8WD" async></script></body></html>